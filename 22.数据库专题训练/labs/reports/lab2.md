# Lab2 Report

2018011365 张鹤潇

### 任务概述

我选择 lab2-simple 分支，依照代码注释实现必要接口，并通过了 CI 测试。

### 关键思路和难点

+ NodePage 基于框架给定的`PopHalf`函数进行，当节点发生满时，就进行分裂生成新的叶节点。特别的，当根节点满时，要生成一个新的根节点，并将旧根分裂出的两个节点作为其子节点。
+ 插入、删除、更新时查找节点的位置的细节较复杂，例如，删除时，对于叶节点，要在 [lower_bound,upper_bound) 范围内查找，对于中间节点，则要在 [max(lower_bound - 1, 0,upper_bound) 区间内调用子节点的删除函数。
+ 为了便于内存管理，我尽可能使用 `unique_ptr`，避免裸指针带来的心智负担。
+ 我按照自己的理解，简化了 NodePage 的大部分接口，比如 KeyLen 可以通过 KeyType 判断，不必存入内存页中。

### 框架问题

用于删除某个 Key 下所有的 Pairs 的接口 `Size Delete(Field *pKey)`没有被 `Instance` 模块调用过，实际上没有被测试。

### 感想

因时间和预期精力有限，对于 simple 分支的性能问题，我没有深入研究。本门课的任务量着实不小，希望我能坚持下来，也请助教给分手下留情。